管理端流程测试
================================================================================
- 商家注册
    * 首先需要商家关注童游的微信帐号,生成玩家.
    * 商家提供收款帐号.

- 创建商家
    * 创建商家
    * 提升商家的玩家身份为创建者
    * 绑定商家提供的收款帐号
    * 增加一名经营者,查看经营者的微信端功能是否正常
    * 设置结算日期
    * 设定分成比例
    * 打印商家二维码
    
- 创建设备
    * 创建产品
    * 创建店面,绑定商家
    * 创建设备,绑定产品, 绑定店面, 生成machineID(1000001781511171012098h571vjFnI1)
    * 关联设备,将machineID配置在客户端

- 模拟消费
    * 商家设置游戏资费
    * 玩家通过扫描商家二维码充值
    * 被动关注童游微信公众号
    * 生成玩家二维码 o7r670zDkW0zMppqj1S7IpXhAkG81230
    * 通过设备扫描玩家二维码进行扣费
    * 扫码成功后进入游戏

- 检测充值和扣费状态
    * 在玩家充值页面查询玩家的充值记录
    * 在玩家端查询消费记录
    * 在商家端查看玩家的充值记录
    * 在商家端查看玩家的消费记录
    * 在管理端查询充值记录
    * 在管理端查询消费记录
    * 查看账单生成记录
    * 查看玩家和公司账户的回款记录

- 成就管理 订购礼品 推送消息
    * 检测游戏成就的达成情况
    * 商家订购了1款礼品
    * 商家准备在次日做一个充值返现活动,在微信端展示

- 开设分店 扩大规模 修改合作模式
    * 分店名称: 吉姆考拉高新区锦辉店
    * 增加设备: 套索英雄团
    * 经营者: 增加1名店长
    * 分店合作模式改为: 不分成,手续费

- 分店倒闭 总店转让 玩家退款
    * 改变一个商家的收款账户
    * 玩家退款.


协议
================================================================================
- 设备登录
http://games.dltongyou.com/tongyou/equipment/equipmentLogin.shtml?json={machineId :"1000001781511171012098h571vjFnI1"}
- 刷卡消费
http://games.dltongyou.com/tongyou/equipment/equipmentPlayer.shtml?json={machineID%20:%20"1000001781511171012098h571vjFnI1",cardId:"o7r670zDkW0zMppqj1S7IpXhAkG81230",position:"0"}
- 发送心跳
http://games.dltongyou.com/tongyou/equipment/equipmentisLogin.shtml?json={machineId :"1000001781511171012098h571vjFnI1"}
- 游戏结算
http://games.dltongyou.com/tongyou/gameLog/insertGameLog.shtml?json={machineId :"1000001781511171012098h571vjFnI1",userCound:"1",startTime:"2017-11-21 14:33:12",endTime:"2017-11-21 14:38:23",userData:[{"cardId":"o7r670zDkW0zMppqj1S7IpXhAkG81230","point":"1010","gold":"1010","animals":{"ids":[1],"cnt":[3]},"huntingCnt":"8","huntingFail":"3","brokeRope":"7","miss":"2","overTurn":"10"}]}



bug
================================================================================
- not solved
    * 管理端.商家管理:最后一个商家删除后,要刷新一下页面才能消失
    * 管理端.商家管理:为商家新增礼品时无法选择礼品ID
    * 管理端.商家管理:中按照商家ID搜索功能未完成.
    * 管理端.玩家管理:以玩家ID进行搜索玩家昵称时显示"网络连接失败"
    * 管理端.玩家管理:看不到玩家的充值记录,消费记录,
    * 管理端.玩家管理:按照玩家ID搜索不支持模糊查询
    * 管理端.玩家管理.充值记录:资金流转状态和补发操作,现在没有意义.暂时先从页面上移除.
    * 管理端.店面管理:最后一个店面删除后,要刷新一下页面才能消失
    * 管理端.设备管理:machineID在设备编辑界面也应该显示出来
    * 管理端.礼品管理:礼品图标不做变形处理.
    * 玩家端:微信端商家活动展示列表为空白页.
    * 玩家端:玩家端首页商家卷展览的'－'号不好用.
    * 玩家端:玩家冻结后,在进入"我要玩游戏"和"玩家中心"没有提示.(弹窗不能关闭,只能返回).
    * 商家端:玩家给商家充值后,在对应的商家端看不到充值记录,消费记录.
    * 商家端:商家端关闭线下充值入口,并弹出提示.
    * 商家端:设备名称沿用产品名称
    * 商家端:消费总点券没有统计出来


- resolved
    * 管理端.商家管理.商家信息.资金流转:表单内容为"次日","9号和24号(每月两次)","10号(每月1次)".
    * 管理端.玩家管理:细分玩家的身份为:"负责人","店员","管理员","玩家".
    * 管理端.商家管理.商家信息:新增"收款人"字段,默认的收款账户为为"负责人"的微信账户.
    * 管理端.商家信息:可以改变一个商户的收款账户,通过填入一个玩家的ID来设置.
    * 管理端.玩家管理:线下充值和线上充值在页面上显示颠倒了.
    * 管理端:管理端的设备管理上增加machineID字段,用于和物理设备绑定.
    * 玩家端:当玩家扫描商家二维码,正确的流程应该是(扫码 -> 充值页面 -> 支付(被动关注) -> 弹出二维码页面).
    * 玩家端:玩家扫描商家的二维码后,在玩家端应该保留该商家的付费入口.下次玩家可以直接点付费进行充值.

- hold
    * 管理端:删除商家后,其他相关信息的处理.
    * 管理端:商家的负责人可以修改.
    * 管理端:每个商家需要一个手续费字段的设置(平时用不着,退款的时候会用到).
    * 管理端.商家管理:新增一个tab页,可以查看玩家的游戏记录.
    * 商家端:根据设备设置资费.
    * 商家端.玩家管理:考虑增加一个微信账单页面,以此账单为依据作为玩家充值未到账的判断条件.



note
================================================================================
商家端的游戏记录30秒刷新一次.
消费金额累计达到1元以上才能生成账单.
当天的23点生成账单
次日的10点向商家转款
必须保证童游的付款账户有钱.

收款账户只能转到绑定的对公银行卡
7天后结算,收取%1的手续费(游戏业务),自动收款
收款账户不允许
微信账户