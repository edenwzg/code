camera
================================================================================

## 前置条件
- **坐标系**
    - **Word**
        - 世界坐标系的y轴为空间的高低
    
    - **Role**
        - 角色x轴为角色的左右方向    
        - 角色y轴为角色的站立方向
        - 角色z轴为角色的前后方向
    
    - **Camera**
        - 摄像机x轴为摄像机的左右方向
        - 摄像机y轴为摄像机上下方
        - 摄像机z轴为景深方向

- **图形投影图形标记符**
    - 摄像机的目标点为t
    - 角色的中心点为r
    - 摄像机的旋转圆为以摄像机目标点为圆心,距离摄像机目标点的长度为半径的圆
    - 角色-z方向射线与r的焦点为点b
    - 摄像机目标点与摄像机距离为tc

- **标准单位**
    - 标准速度单位: m/s
    - 标准长度单位: m
    - 标准时间单位: s
    - 标准加速度单位: 米每二次方秒
```math
m/s^2
```
- **配置方式与调试需求**
    - 各种参数在开发阶段可动态调节的(在游戏运行状态下,改变参数,查看效果)
    - 最终要根据实际需求读数据库.

## 通用脚本
- **摄像机动画(在游戏中需要多种摄像机动画的不同表现形式)**
    - 摄像机震动(在不同的触发事件下会有不同的种震动效果)

- **缓冲控制器(很多程序实现的移动和旋转需要运动的缓冲,所以独立此功能)**
    - **移动缓冲**
        - 加速度方式(曲线控制器)(描述物体加速度的方式)   
        - 响应时间[x, y, z](描述响应运动的时间)
        - 缓冲加速度[x, y, z](描述物体速度变化的快慢)


- **参数控制**
    - 选择控制参数
    - 选择关联对象
    - 参数范围[max, min]


- **变换控制器**
    - **位移控制**
        - 路径运动控制器:物体沿某条路径运动
            - 选择路径
            - 默认位置百分比
            - 路径范围[max, min]
        - 跟随运动控制器:被跟随物体的移动,会影响跟随物体的移动.(只影响位移,不影响旋转和缩放)
            - 选择跟随物体
            - 与跟随物体的偏移默认值[x, y, z]
    - **旋转控制**
        - 注视控制器
            - 选择目标
            - 选择注视轴向[x, y, z]


## 摄像机实现建议
 

- **Camera.Target**
    - 调用变换控制器脚本,实现自身跟随角色移动(在此实例中是选择位移控制,添加跟随运动控制器)
    - 调用缓冲控制器脚本,实现自身的的运动缓冲.
    - 沿自身y轴的默认偏移值.
        - 控制位移跟随物体居画面中心的上下的偏移.(一般会居画偏下一点)
        - 该参数非默认情况下,会被用于表现角色跳跃时画面跟随的延迟.(见延迟相关)
    - 沿自身x轴的默认偏移值.
        - 控制位移跟随物体居画面中心的左右的偏移.(默认为0居中)
        - 该参数非默认情况下,会被用于表现角色转向时距画面中心的左右的位置偏移.

- **Camera.Body**
    - 调用变换控制器脚本实现摄像机注视效果(在此实例中是选择旋转控制,添加注视控制器)
    - 调用变换控制器脚本实现摄像机俯仰效果(在此实例中是选择位移控制,添加路径运动控制器)
    - 调用缓冲控制器脚本,实现自身运动缓冲.
    - FOV

- **Camera.Path**
    - 调用变换控制脚本(在此实例中是选择位移控制,添加跟随运动控制器)

- **Camera.Animation**
    - 选择摄像机动画
    - 设置动画循环次数
    - 设置动画播放速度


摄像机功能需求
================================================================================

- **摄像机跟随**
    - 摄像机跟随:角色在移动时,摄像机跟随物体移动
    - 摄像机缓冲:角色移动时,摄像机有位移缓冲效果,缓冲的相关参数可调  

- **摄像机注视目标跟随**
    - 摄像机目标点:摄像机有一个注视的目标点,通过注视目标点来实现摄像机的旋转.
    - 目标位移跟随:这个目标点大多数情况下会和角色保持同步位移,但是不跟随角色旋转. 
    - 角色跳跃处理:角色跳起时,摄像机目标点,不是马上跟随,而是延迟一段时间后再跟随.
    - 跟随缓冲处理:摄像机目标点在跟随角色移动时,有位移缓冲效果,缓冲效果更参数可调.
    - 角色转向处理:角色转向时,摄像机目标点会左右偏离角色一小段距离.

- **手动调整摄像机视野**
    - 操控视野:玩家可以调整摄像机绕角色旋转,观察周围的环境.
    - 水平旋转:在屏幕上左右滑动,可操作摄像机水平旋转,旋转方式为360度可循环.
    - 俯仰旋转:在屏幕上上下滑动,可操作摄像机俯视和仰视,俯仰角有限定,开发阶段可调.

- **摄像机矫正**
    - 摄像机矫正:角色边转向便移动,摄像机做试图跟随角色的转向矫正.
    - 矫正的角度:减少摄像机和角色与角色反向射线的锐角角度(crb)
    - 矫正的速度:摄像机俯仰角越小(接近平视)摄像机矫正速度越快,反之越慢(接近俯视角)
    - 俯视不矫正:在相机的俯仰角达到某一个值时(接近90度),矫正速度降为0.(不矫正)    
    - 正向不矫正:当角色向像机前方移动,或面朝摄像机移动时,摄像机不矫正

- **预设视角和视角归位**
    - 视角归位:当角色速度达到某个值时启用视角归位.
    - 归位中断:当玩家操纵视角时,可打断视角归位,用户操作控制接管当前视角状态进行调节.
    - 暂停归位:玩家操控视野时或玩家操控视野后一定时间内不进行视角归位.
    - 观察视角:场景加载后默认为观察视角,当玩家按任意键切换为角色默认视角
    - 常规视角:
    - 快速视角:
    - 慢速视角:
    - 当角色的移送速度达到某个值时,切换为默认视角.

- **摄像机碰撞**


- **角色被物体遮挡**


- **剧情像机**


- **摄像机特效**
    - Clipping Planes
    - Depth of Field
    - HDR
    - Motion blur


摄像机控制事件
================================================================================





